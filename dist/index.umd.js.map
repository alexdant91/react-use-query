{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import { useState, useEffect, useRef, createContext, useContext } from 'react';\n\n/**\n * @callback QueryResultCacheFn\n * @param {string} url\n * \n * @typedef {object} QueryResultCache\n * @property {QueryResultCacheFn} get\n * @property {QueryResultCacheFn} has\n * @property {QueryResultCacheFn} clear\n *\n * @typedef {object} QueryResult\n * @property {*} data\n * @property {Error|false} error\n * @property {boolean} loading\n * @property {function} updateData\n * @property {function} refresh\n * @property {QueryResultCache} cache\n * \n * @typedef {object} DefaultUseQueryOptions\n * @property {string} [selector] \n * @property {function} [manipulate] \n * @property {string} [method=\"GET\"] \n * @property {object} [headers] \n * @property {*} [body] \n * @property {boolean} [isDebuggerActivated=false] \n * @property {number} [cacheTimeout=0] \n */\n\nconst DEFAULT_OPTIONS = {\n    selector: undefined,\n    manipulate: undefined,\n    method: \"GET\",\n    headers: undefined,\n    body: undefined,\n    isDebuggerActivated: false,\n    cacheTimeout: 0,\n};\n\nlet cacheTimeout = null;\n\n/**\n * @param {string} [message=\"\"] \n * @param {boolean} [isDebuggerActivated=false]\n * @param {boolean} [isError=false] \n * @param {null|string|Error} [error=null]\n */\nconst logDebugger = (message = \"\", isDebuggerActivated = false, isError = false, error = null) => {\n    if (isError) {\n        if (isDebuggerActivated) console.error(`[USE_QUERY]: ${message} - ${new Date().toLocaleTimeString()}`, error);\n    } else {\n        if (isDebuggerActivated) console.log(`[USE_QUERY]: ${message} - ${new Date().toLocaleTimeString()}`);\n    }\n}\n\n/**\n * @param {DefaultUseQueryOptions} options \n * @returns {boolean}\n */\nconst validateOptions = (options) => {\n    const keys = Object.keys(DEFAULT_OPTIONS);\n    const _keys = Object.keys(options);\n    const symDifference = _keys.filter(item => !keys.includes(item));\n\n    if (options.selector !== undefined && typeof options.selector !== \"string\") {\n        logDebugger(\"Validation error for `options.selector`\", isDebuggerActivated, true, new Error(\"Selector must be a string. It should contains key value to select from result object.\"));\n        return false;\n    } else if (options.method !== undefined && (typeof options.method !== \"string\" || [\"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\"].indexOf(options.method.toUpperCase()) === -1)) {\n        logDebugger(\"Validation error for `options.method`\", isDebuggerActivated, true, new Error('Method must be a string. It should be one of \"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\".'));\n        return false;\n    } else if (options.headers !== undefined && typeof options.headers !== \"object\" && Array.isArray(options.headers)) {\n        logDebugger(\"Validation error for `options.headers`\", isDebuggerActivated, true, new Error(\"Headers must be an object. It should contains request headers key value.\"));\n        return false;\n    } else if (options.isDebuggerActivated !== undefined && typeof options.isDebuggerActivated !== \"boolean\" && Array.isArray(options.headers)) {\n        logDebugger(\"Validation error for `options.isDebuggerActivated`\", true, true, new Error(\"isDebuggerActivated must be a boolean. It should be activated if you need to debug all process.\"));\n        return false;\n    } else if (options.manipulate !== undefined && typeof options.manipulate !== \"function\") {\n        logDebugger(\"Validation error for `options.manipulate`\", true, true, new Error(\"manipulate must be a function. It rappresent the funcion to manipulate data before saving on state.\"));\n        return false;\n    } else if (options.cacheTimeout !== undefined && typeof options.cacheTimeout !== \"number\") {\n        logDebugger(\"Validation error for `options.cacheTimeout`\", true, true, new Error(\"cacheTimeout must be a number. It rappresent the timeout to remove cached data from memory in milliseconds.\"));\n        return false;\n    }\n    \n    if (symDifference.length > 0) {\n        logDebugger(\"Validation error\", true, true, new Error(`Found not valid option${symDifference.length > 1 ? \"s\" : \"\"}: \"${symDifference.join('\", \"')}\".`));\n        return false;\n    }\n\n    return true;\n}\n\n/**\n * @param {DefaultUseQueryOptions} options \n * @param {MutableRefObject} cache \n */\nconst timeoutCacheClear = (options, cache) => {\n    if (options.cacheTimeout && options.cacheTimeout > 0) {\n        logDebugger(`Cache clear timeout start: ${options.cacheTimeout / 1000} seconds.`, options.isDebuggerActivated);\n        clearTimeout(cacheTimeout);\n        cacheTimeout = setTimeout(() => {\n            cache.current = {};\n            logDebugger(`Cache cleared`, options.isDebuggerActivated);\n        }, options.cacheTimeout);\n    }\n}\n\nconst QueryContext = createContext(null);\n\nexport const QueryProvider = ({ children }) => {\n    const [state, setState] = useState(null);\n    return (\n        <QueryContext.Provider value={[state, setState]}>\n            {children}\n        </QueryContext.Provider>\n    )\n}\n\nexport const useQueryContext = () => useContext(QueryContext);\n\n/**\n * Use query hook that manage requests, cache and other features.\n * @param {string} url \n * @param {object} options\n * @param {string} [options.selector] Selector must be a string. It should contains key value to select from result object.\n * @param {function} [options.manipulate] manipulate must be a function. It rappresent the funcion to manipulate data before saving on state. If you need to mutate data, use `mutate` function instead\n * @param {string} [options.method] Method must be a string. It should be one of \"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\".\n * @param {object} [options.headers] Headers must be an object. It should contains request headers key value.\n * @param {*} [options.body]\n * @param {boolean} [options.isDebuggerActivated] isDebuggerActivated must be a boolean. It should be activated if you need to debug all process.\n * @param {number} [options.cacheTimeout] cacheTimeout must be a number. It rappresent the timeout to remove cached data from memory in milliseconds.\n * @returns {QueryResult}\n */\nexport const useQuery = (url, options = { ...DEFAULT_OPTIONS }) => {\n    const { selector, manipulate, method, headers, body, isDebuggerActivated } = { ...DEFAULT_OPTIONS, ...options };\n\n    validateOptions({ ...DEFAULT_OPTIONS, ...options });\n    \n    const cache = useRef({});\n\n    const [data, setData] = useQueryContext();\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const fetchData = async () => {\n        logDebugger(\"Fetching data...\", isDebuggerActivated);\n\n        if (error) setError(null);\n        if (!loading) setLoading(true);\n\n        if (cache.current[url]) {\n            logDebugger(\"Get data from cache, no need a new request\", isDebuggerActivated);\n            if (typeof manipulate === \"function\") logDebugger(\"Manipulate data before saving\", isDebuggerActivated);\n\n            setData(cache.current[url]);\n            timeoutCacheClear(options, cache);\n            setLoading(false);\n            return;\n        }\n\n        try {\n            logDebugger(\"No data found in cache, proceed to do a new request...\", isDebuggerActivated);\n\n            const response = await fetch(url, { method, headers, data: body });\n            const result = await response.json();\n\n            if (response.ok) {\n                const _result = selector ? result[selector] : result;\n                if (typeof manipulate === \"function\") logDebugger(\"Manipulate data before saving\", isDebuggerActivated);\n                setData(typeof manipulate === \"function\" ? manipulate(_result) : _result);\n                logDebugger(\"Request done\", isDebuggerActivated);\n                cache.current[url] = typeof manipulate === \"function\" ? manipulate(_result) : _result;\n                timeoutCacheClear(options, cache);\n                logDebugger(`New data saved on cache for: \"${url}\"`, isDebuggerActivated);\n            } else {\n                setError(result);\n                logDebugger(\"An error occurred\", isDebuggerActivated, true, result);\n            }\n        } catch (err) {\n            setError(err);\n            logDebugger(\"An error occurred\", isDebuggerActivated, true, err);\n        } finally {\n            setLoading(false);\n            logDebugger(\"Data seatled, process done\", isDebuggerActivated);\n        }\n    };\n\n    useEffect (() => {\n        fetchData();\n    }, [url]);\n\n    return {\n        data,\n        error,\n        loading,\n        updateData: setData,\n        refresh: fetchData,\n        cache: {\n            get: (url) => {\n                return url ? cache.current[url] : cache.current;\n            },\n            has: (url) => {\n                return cache.current[url];\n            },\n            clear: () => {\n                cache.current = {};\n                logDebugger(`Cache cleared`, isDebuggerActivated);\n            }\n        }\n    };\n};"],"names":["_catch","body","recover","result","e","then","DEFAULT_OPTIONS","selector","undefined","manipulate","method","headers","isDebuggerActivated","cacheTimeout","_finallyRethrows","finalizer","bind","logDebugger","message","isError","error","console","Date","toLocaleTimeString","log","validateOptions","options","keys","Object","_keys","symDifference","filter","item","includes","Error","indexOf","toUpperCase","Array","isArray","length","join","timeoutCacheClear","cache","clearTimeout","setTimeout","current","QueryContext","createContext","QueryProvider","_ref","children","_useState","useState","state","setState","_jsx","Provider","value","useQueryContext","useContext","useQuery","url","_extends","_DEFAULT_OPTIONS$opti","useRef","_useQueryContext","data","setData","_useState2","setError","_useState3","loading","setLoading","fetchData","Promise","resolve","_temp","fetch","response","json","ok","_result","err","_wasThrown","_result2","reject","useEffect","updateData","refresh","get","has","clear"],"mappings":"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"}